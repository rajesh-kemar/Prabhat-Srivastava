<h2 style="text-align: center; font-size: 30px; margin-top: 30px; font-weight: bold;">
  Drivers List
</h2>

<div class="driver-container">
  <div class="driver-header">
    <button class="open-modal-btn" (click)="openModal()">+ Add Driver</button>
  </div>

  <div class="driver-table">
    <table class="tablew">
      <thead>
        <tr>
          <th>Name</th>
          <th>Phone</th>
          <th>License</th>
          <th>Experience (Years)</th>
          <th>Available</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let d of filteredDrivers">
          <td>{{ d.name }}</td>
          <td>{{ d.phone }}</td>
          <td>{{ d.drivingLicense }}</td>
          <td>{{ d.experienceYears }}</td>
          <td [style.color]="d.isAvailable ? 'green' : 'red'" style="font-weight: 600;">
            {{ d.isAvailable ? 'Yes' : 'No' }}
          </td>
          <td class="action-buttons">
            <button class="edit" (click)="editDriver(d)">Edit</button>
            <button class="delete" (click)="deleteDriver(d.id)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="modal" [class.show-modal]="isModalVisible">
    <div class="modal-content">
      <span class="close-btn" (click)="closeModal()">&times;</span>
      <h2>{{ driver.id ? 'Edit Driver' : 'Add Driver' }}</h2>

      <form #driverForm="ngForm" (ngSubmit)="driverForm.valid && saveDriver()">
        <input [(ngModel)]="driver.name" name="name" placeholder="Driver Name" required #name="ngModel" />
        <div *ngIf="name.invalid && name.touched" class="error-text">
          Driver name is required.
        </div>

        <input
          [(ngModel)]="driver.phone"
          name="phone"
          placeholder="Phone (10 digits)"
          required
          pattern="^[0-9]{10}$"
          #phone="ngModel"
        />
        <div *ngIf="phone.invalid && phone.touched" class="error-text">
          <span *ngIf="phone.errors?.['required']">Phone number is required.</span>
          <span *ngIf="phone.errors?.['pattern']">Enter a valid 10-digit phone number.</span>
        </div>

        <input
          [(ngModel)]="driver.drivingLicense"
          name="drivingLicense"
          placeholder="License Number"
          required
          #license="ngModel"
        />
        <div *ngIf="license.invalid && license.touched" class="error-text">
          Driving license number is required.
        </div>

        <input
          type="number"
          [(ngModel)]="driver.experienceYears"
          name="experienceYears"
          placeholder="Experience (Years)"
          min="0"
          required
          #experience="ngModel"
        />
        <div *ngIf="experience.invalid && experience.touched" class="error-text">
          <span *ngIf="experience.errors?.['required']">Experience is required.</span>
          <span *ngIf="experience.errors?.['min']">Experience cannot be negative.</span>
        </div>

        <label style="margin-top: 10px;">
          <input type="checkbox" [(ngModel)]="driver.isAvailable" name="isAvailable" />
          Available
        </label>

        <button type="submit" [disabled]="!driverForm.valid">
          {{ driver.id ? 'Update' : 'Add' }}
        </button>
      </form>
    </div>
  </div>
</div>
